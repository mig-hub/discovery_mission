A SPACE ODYSSEY

This is just a simple, basic (dummy?) and lightweight crawler.
It is used to reference all URLs of your website in order to record them on a database, and use them for a sitemap manager.

Just put the file somewhere you can require it and then you're ready to take off:

require 'discovery_mission'

# Use a block to do something with each path
# response is a 'net/http' response object, therefore responds to :body, :code ... 

DiscoveryMission.for("http://www.my-domain.com") do |url, response|
	puts "Dave Bowman landed on #{url}"
	case response
	when Net::HTTPSuccess
		puts "Fuck you HAL 9000"
	when Net::HTTPRedirection
		puts "Shit! That's Jupiter!"
	else
		puts "Bad trip indeed"
	end
end

# Or just without a block because an Array with all paths is returned

my_sitemap_entries = DiscoveryMission.for("http://www.my-domain.com")

# Copyright (c) 2009 Mickael Riga
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.